# Default values for planetiler-openmaptiles Helm chart.
# This is a YAML-formatted file.

nameOverride: ""
fullnameOverride: ""

image:
  repository: openmaptiles/planetiler-openmaptiles
#  tag: "latest"
  pullPolicy: IfNotPresent

imagePullSecrets: []
# - name: my-registry-secret

job:
  enabled: true
  backoffLimit: 0
  activeDeadlineSeconds: null
  ttlSecondsAfterFinished: null
  annotations: {}
  labels: {}

podAnnotations: {}
podLabels: {}

serviceAccount:
  create: true
  name: ""
  annotations: {}
  automountServiceAccountToken: false

securityContext:
  # Pod-level security context
  enabled: true
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000
  seccompProfile:
    type: RuntimeDefault

containerSecurityContext:
  enabled: true
  allowPrivilegeEscalation: false
  capabilities:
    drop: ["ALL"]
  readOnlyRootFilesystem: false

resources:
  limits: {}
  requests: {}
  # Sizing guidance (starting points; adjust to your cluster/area/zoom):
  # - Tiny demo (e.g., monaco): requests {cpu: 2,  memory:  8Gi}, limits {cpu: 4,  memory: 16Gi}
  # - Small city/region:         requests {cpu: 4,  memory: 16Gi}, limits {cpu: 8,  memory: 32Gi}
  # - Medium country:            requests {cpu: 8,  memory: 32Gi}, limits {cpu:16,  memory: 64Gi}
  # - Large region:              requests {cpu:16,  memory: 64Gi}, limits {cpu:32,  memory:128Gi}
  # - Whole planet:              requests {cpu:32,  memory:128Gi}, limits {cpu:64,  memory:256Gi}
  # Example explicit resources:
  # limits:
  #   cpu: 8
  #   memory: 32Gi
  # requests:
  #   cpu: 4
  #   memory: 16Gi
  # Tip: For batch Jobs consider setting requests == limits to get Guaranteed QoS.

nodeSelector: {}
affinity: {}
tolerations: []

# Configure environment variables for the container
# NOTE: Upstream recommends CLI flags (see `.values.args`) like `--force --download --area=monaco`.
# Env vars are kept for compatibility but are not required.
env:
  TZ: "Europe/Zurich"
#  DOWNLOAD_PBF_URL: https://download.geofabrik.de/europe/germany/berlin-latest.osm.pbf
#  MIN_ZOOM: "0"
#  MAX_ZOOM: "14"

# Additional envFrom sources (ConfigMap/Secret refs)
envFrom: []
# - configMapRef:
#     name: my-config
# - secretRef:
#     name: my-secret

# Command/args override if needed
command: []
# Default to the official recommended flags
args:
  - --force
  - --download
  - --output=/data/tiles.mbtiles
# Optional convenience: append an area without dealing with shell quoting
area: ""  # e.g. monaco, liechtenstein; when set, appends --area=<value> to args
# Additional arguments to append after defaults and optional area
extraArgs: []


# Persistence for output tiles/data
persistence:
  enabled: true
  existingClaim: ""
  storageClassName: ""
  accessModes:
    - ReadWriteOnce
  size: 100Gi
  # Disk sizing guidance (starting points; adjust by area and MAX_ZOOM):
  # - Tiny demo:          50–100Gi
  # - Small city/region:  100–200Gi
  # - Medium country:     300–600Gi
  # - Large region:       0.8–1.5Ti
  # - Whole planet:       2–4Ti
  # Prefer SSD-backed classes; ensure sufficient IOPS for faster builds.
  mountPath: /data
  annotations: {}

# Additional volumes and mounts
extraVolumeMounts: []
extraVolumes: []

# PriorityClassName, DNS, hostAliases etc.
priorityClassName: ""
hostAliases: []
dnsPolicy: ""
dnsConfig: {}
