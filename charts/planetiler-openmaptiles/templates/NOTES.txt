Thank you for installing the planetiler-openmaptiles chart!

This chart now runs a one-off Kubernetes Job executed by Helm hooks on every install and upgrade.

This chart creates:
- A Job (hook) named: {{ include "planetiler-openmaptiles.fullname" . }}
{{- if and .Values.persistence.enabled (not .Values.persistence.existingClaim) }}
- A PersistentVolumeClaim named: {{ include "planetiler-openmaptiles.fullname" . }}-data
{{- end }}

What happens when you install/upgrade:
- A post-install/post-upgrade Helm hook creates and runs the Job after regular resources are ready.
- By default, successful hook Jobs/Pods are cleaned up (`helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded`).

Observe the Job and Pods:
  kubectl -n {{ .Release.Namespace }} get jobs -l app.kubernetes.io/instance={{ .Release.Name }}
  kubectl -n {{ .Release.Namespace }} get pods -l job-name={{ include "planetiler-openmaptiles.fullname" . }}

Tail logs (while the Job is running):
  kubectl -n {{ .Release.Namespace }} logs --tail=200 -l app.kubernetes.io/instance={{ .Release.Name }} --selector=job-name={{ include "planetiler-openmaptiles.fullname" . }}

Re-run the Job via Helm (without changing values):
  helm upgrade {{ .Release.Name }} {{ .Chart.Name }} -n {{ .Release.Namespace }} --reuse-values

Keep hook resources for debugging (optional):
  helm upgrade {{ .Release.Name }} {{ .Chart.Name }} -n {{ .Release.Namespace }} \
    --reuse-values \
    --set-json 'job.annotations={"helm.sh/hook-delete-policy":"before-hook-creation"}'

If you enabled persistence, outputs will be written under the mounted path inside the container (default {{ .Values.persistence.mountPath }}).
